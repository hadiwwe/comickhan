<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ú©Ù…ÛŒÚ© Ø®ÙˆØ§Ù†</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div>Ú©Ù…ÛŒÚ© Ø®ÙˆØ§Ù†</div>
  <div id="score-display" onclick="switchTab(event, 'score')">
    <img src="https://img.icons8.com/emoji/96/000000/coin-emoji.png" style="width:32px; height:32px;">
    Ø§Ù…ØªÛŒØ§Ø²: <span id="score-value">20</span>
  </div>
</header>

<main>
  <div id="comics-tab">
    <h2 style="text-align:center; margin:20px 0;">Ú©Ù…ÛŒÚ©â€ŒÙ‡Ø§</h2>
    <div id="comics-list"></div>
  </div>

  <div id="score-tab" style="display:none; text-align:center; padding:40px 20px; background: linear-gradient(135deg, #1e3c72, #2a5298); border-radius:16px; margin:20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
    <h2 style="color:#ffd700; margin-bottom:20px; font-size:2em; text-shadow: 0 2px 10px rgba(255,215,0,0.6);">
      Ø§Ù…ØªÛŒØ§Ø²Ø§Øª Ø´Ù…Ø§ ğŸ’
    </h2>
    
    <div style="display:flex; align-items:center; justify-content:center; gap:15px; margin:30px 0;">
      <img src="https://img.icons8.com/emoji/96/000000/coin-emoji.png" style="width:80px; height:80px; animation: spin 4s linear infinite;">
      <span id="score-value-big" style="font-size:4.5em; font-weight:bold; color:#ffeb3b; text-shadow: 0 0 20px #ffeb3b;">
        20
      </span>
    </div>

    <p style="font-size:1.3em; color:#e0f7fa; margin:20px 0;">
      Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØªØ¨Ù„ÛŒØº = <strong style="color:#ffeb3b;">Û²Û° Ø³Ú©Ù‡</strong>
    </p>
    <p style="font-size:1.2em; color:#b3e5fc;">
      Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù‡Ø± ÙØµÙ„ = Û±Û° Ø³Ú©Ù‡ 
    </p>

    <button onclick="watchAdForReward()" 
            style="padding:18px 50px; font-size:1.4em; background:linear-gradient(45deg, #ff6b6b, #ff8e53); color:white; border:none; border-radius:50px; cursor:pointer; box-shadow:0 8px 25px rgba(255,107,107,0.5); transition:all 0.3s; margin-top:30px;">
      ØªÙ…Ø§Ø´Ø§ÛŒ ØªØ¨Ù„ÛŒØº ğŸ
    </button>
  </div>
</main>

<div class="tab-bar">
  <div class="tab active" onclick="switchTab(event, 'comics')">Ú©Ù…ÛŒÚ©â€ŒÙ‡Ø§</div>
  <div class="tab" onclick="switchTab(event, 'score')">Ø§Ù…ØªÛŒØ§Ø²</div>
</div>

<script src="data.js"></script>
<script src="storage.js"></script>
<script src="ads.js"></script>

<script>


window.updateScoreUI = function() {
  const score = window.getScore ? window.getScore() : 1;
  const scoreEl = document.getElementById('score-value');
  const scoreBigEl = document.getElementById('score-value-big');
  if (scoreEl) scoreEl.textContent = score;
  if (scoreBigEl) scoreBigEl.textContent = score;
};

function switchTab(event, tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('comics-tab').style.display = tab === 'comics' ? 'block' : 'none';
  document.getElementById('score-tab').style.display = tab === 'score' ? 'block' : 'none';
}

function renderComics() {
  const list = document.getElementById('comics-list');
  if (!list) return;
  list.innerHTML = '';
  list.style.display = 'grid';
  list.style.gridTemplateColumns = 'repeat(2, 1fr)';
  list.style.gap = '16px';
  list.style.padding = '10px';

  comics.forEach(c => {
    const card = document.createElement('div');
    card.className = 'card';
    card.style.borderRadius = '16px';
    card.style.overflow = 'hidden';
    card.style.background = 'rgba(40,30,60,0.8)';
    card.style.cursor = 'pointer';
    card.style.boxShadow = '0 4px 12px rgba(0,0,0,0.4)';

    card.innerHTML = `
      <img src="${c.cover}" style="width:100%; height:auto; display:block;">
      <div style="padding:14px; text-align:center;">
        <h3 style="color:#ffea00; font-size:1.2rem; margin:0 0 6px;">${c.title}</h3>
        <small style="color:#c0b0ff; font-size:1rem;">${c.chaptersCount} ÙØµÙ„</small>
      </div>
    `;

    card.onclick = () => location.href = `comic-detail.html?id=${c.id}`;
    list.appendChild(card);
  });
}

window.addEventListener('load', () => {
  window.updateScoreUI();
  renderComics();
});

document.addEventListener("visibilitychange", () => {
  if (!document.hidden) {
    window.updateScoreUI();
  }
});
</script>

</body>
</html>